(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(n,e,t){n.exports=t(34)},34:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),i=t(6),c=t.n(i),o=t(4),u=t(3),s=t(5),d=t.n(s),l=t(12),p=t(7),m=t(8),f=t(10),x=t(9),b=t(11),g=t(2),h=t(1);function v(){var n=Object(g.a)(["\n  padding: 2px 4px;\n  border: 0;\n  border-radius: 5px;\n  box-shadow: 1px 1px 3px 1px rgba(0, 0, 0, 0.4);\n  background: orangered;\n  \n  &:active {\n    transform: translate(1px, 1px);\n    box-shadow: none;\n  }\n  \n  &:focus {\n    outline: none;\n  }\n"]);return v=function(){return n},n}function w(){var n=Object(g.a)(["\n  padding: 0 3px;\n  border: 2px solid orangered;\n  border-radius: 5px;\n  background: transparent;\n  color: white;\n  \n  &:focus {\n    outline: none;\n  }\n"]);return w=function(){return n},n}function j(){var n=Object(g.a)(["\n  flex: 1;\n  display: grid;\n  grid-template-columns: 3fr 1fr;\n  grid-column-gap: 10px;\n"]);return j=function(){return n},n}var y=h.c.form(j()),O=h.c.input(w()),E=h.c.button(v()),S=function(n){function e(){var n,t;Object(p.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=Object(f.a)(this,(n=Object(x.a)(e)).call.apply(n,[this].concat(a)))).state={value:""},t.handleChange=function(n){t.setState({value:n.target.value})},t.handleSubmit=function(n){n.preventDefault(),t.props.onSubmit(t.state.value),t.setState({value:""})},t}return Object(b.a)(e,n),Object(m.a)(e,[{key:"render",value:function(){var n=this.props,e=n.placeholder,t=n.text;return a.a.createElement(y,{onSubmit:this.handleSubmit},a.a.createElement(O,{type:"text",value:this.state.value,onChange:this.handleChange,placeholder:e}),a.a.createElement(E,{type:"Submit"},t))}}]),e}(a.a.Component);function k(){var n=Object(g.a)(["\n  position: relative;\n  z-index: 10;\n  border-radius: 2px 2px 0 0;\n  background: ",";\n"]);return k=function(){return n},n}var C=h.c.div(k(),function(n){return n.theme.main||"#412198"}),N=function(n){return a.a.createElement(C,null)};function A(){var n=Object(g.a)(["\n  position: relative;\n  padding: 10px 20px;\n  box-shadow: 0 0 3px 1px rgba(0, 0, 0, 0.4);\n  display: flex;\n  justify-content: space-between;\n  \n  background: ",";\n"]);return A=function(){return n},n}var z=h.c.div(A(),function(n){return n.theme.sideMenu||"linear-gradient(45deg, #CF3BEF 0%,#BA28DB 100%)"}),D=function(n){return a.a.createElement(z,{className:n.className},n.children)};function W(){var n=Object(g.a)(["\n  font-size: ",";\n  text-align: ",";\n"]);return W=function(){return n},n}function T(){var n=Object(g.a)(["\n  font-size: ",";\n"]);return T=function(){return n},n}function B(){var n=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n"]);return B=function(){return n},n}var Z=h.c.div(B()),F=h.c.h2(T(),function(n){return n.big?"3em":"1.5em"}),I=h.c.p(W(),function(n){return n.big?"1.5em":"0.75em"},function(n){return n.centered?"center":"end"}),M=function(n){return a.a.createElement(Z,{className:n.className},a.a.createElement(F,{big:n.big},n.temperature,"\xb0C"),a.a.createElement(I,{big:n.big,centered:n.centered},n.weather))};function q(){var n=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n"]);return q=function(){return n},n}var H=h.c.div(q()),L=function(n){var e=n.humidity,t=n.windSpeed,r=n.pressure;return a.a.createElement(H,{className:n.className},a.a.createElement("p",null,"Humidity: ",e,"%"),a.a.createElement("p",null,"Wind: ",t,"m/s"),a.a.createElement("p",null,"Pressure: ",r,"mm"))};function J(){var n=Object(g.a)(["\n  flex: 1;\n"]);return J=function(){return n},n}function X(){var n=Object(g.a)(["\n  align-self: flex-end;\n  margin-bottom: 8px;\n  \n  @media (max-width: 599px) {\n    margin-bottom: 0;\n  }\n"]);return X=function(){return n},n}function Y(){var n=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n"]);return Y=function(){return n},n}function P(){var n=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n  box-shadow: 0 0 3px 1px rgba(0, 0, 0, 0.4);\n  padding: 5px 10px;\n  background: white;\n  \n  @media (min-width: 900px) and (max-width: 1199px) {\n    font-size: 12px;\n  }\n  \n  @media (max-width: 599px) {\n    font-size: 12px;\n  }\n"]);return P=function(){return n},n}var Q=h.c.div(P()),R=h.c.div(Y()),$=h.c.p(X()),_=Object(h.c)(M)(J()),G=function(n){var e=n.humidity,t=n.windSpeed,r=n.pressure,i=n.temperature,c=n.weather,o=n.timeOfDay;return a.a.createElement(Q,{className:n.className},a.a.createElement(L,{humidity:e,windSpeed:t,pressure:r}),a.a.createElement(R,null,a.a.createElement($,null,o),a.a.createElement(_,{temperature:i,weather:c})))};function K(){var n=Object(g.a)(["\n  @media (max-width: 599px) {\n    font-size: 16px;\n  }\n"]);return K=function(){return n},n}function U(){var n=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return U=function(){return n},n}function V(){var n=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]);return V=function(){return n},n}var nn=h.c.div(V()),en=h.c.div(U()),tn=h.c.h2(K()),rn=function(n){var e=n.day;return a.a.createElement(nn,null,a.a.createElement(en,null,a.a.createElement(tn,null,e[0].day),a.a.createElement("p",null,e[0].date)),e.map(function(n){return a.a.createElement(G,n)}))};function an(){var n=Object(g.a)(["\n  flex: 1;\n  \n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 15px;\n  \n  @media (max-width: 899px) {\n    grid-auto-flow: row;\n    grid-gap: 5px;\n  }\n"]);return an=function(){return n},n}var cn=h.c.div(an()),on=function(n){return a.a.createElement(D,{className:n.className},a.a.createElement(cn,null,n.forecast.map(function(n){return a.a.createElement(rn,{day:n})})))};function un(){var n=Object(g.a)(["\n  position: relative;\n  padding: 20px;\n  border-radius: 5px;\n  box-shadow: 0 0 4px 2px rgba(0, 0, 0, 0.4);\n  z-index: 10;\n  \n  background: ",";\n"]);return un=function(){return n},n}var sn=h.c.div(un(),function(n){return n.theme.card||"linear-gradient(to bottom, #BA28DB 0%, #AA18CB 100%)"}),dn=function(n){return a.a.createElement(sn,{className:n.className},n.children)};function ln(){var n=Object(g.a)(["\n  height: 100%;\n  width: 100%;\n  display: grid;\n  grid-template-rows: ",";\n  grid-template-columns: ",";\n"]);return ln=function(){return n},n}var pn=h.c.div(ln(),function(n){return n.rows?n.rows.join("fr ")+"fr":"1fr"},function(n){return n.columns?n.columns.join("fr ")+"fr":"1fr"}),mn=function(n){return a.a.createElement(pn,{rows:n.rows,columns:n.columns},n.children)};function fn(){var n=Object(g.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return fn=function(){return n},n}var xn=h.c.h2(fn()),bn=function(n){return a.a.createElement(xn,null,n.children)};function gn(){var n=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n"]);return gn=function(){return n},n}var hn=h.c.div(gn()),vn=function(n){return a.a.createElement(hn,null,a.a.createElement("p",null,n.sunrise),a.a.createElement("p",null,n.sunset))};function wn(){var n=Object(g.a)(["\n  padding: 2px 6px;\n  border: 0;\n  border-radius: 5px;\n  background: orangered;\n  \n  &:focus {\n    outline: none;\n  }\n  \n  &:active {\n    box-shadow: inset 0 0 2px 2px rgba(0, 0, 0, 0.4);\n    transform: scale(0.95);\n  }\n"]);return wn=function(){return n},n}var jn=h.c.button(wn()),yn=function(n){return a.a.createElement(jn,{onClick:n.onClick,className:n.className},n.text)};function On(){var n=Object(g.a)(["\n  position: relative;\n  width: 20px;\n  height: 20px;\n  background: transparent;\n  border: none;\n  \n  &:before {\n    content: '';\n    position: absolute;\n    width: 100%;\n    height: 1px;\n    top: calc(50% - 0.5px);\n    left: 0;\n    transform:  rotate(-45deg);\n    background: black;\n  }\n  \n  &:after {\n    content: '';\n    position: absolute;\n    width: 1px;\n    height: 100%;\n    top: 0;\n    left: calc(50% - 0.5px);\n    transform:  rotate(-45deg);\n    background: black;\n  }\n  \n  &:focus {\n    outline: none;\n  }\n  \n  &:active {\n    transform: translate(1px, 1px);\n  }\n"]);return On=function(){return n},n}var En=h.c.button(On()),Sn=function(n){return a.a.createElement(En,{className:n.className,onClick:n.onClick})};function kn(){var n=Object(g.a)(["\n  align-self: center;\n"]);return kn=function(){return n},n}function Cn(){var n=Object(g.a)(["\n  position: absolute;\n  top: 5px;\n  right: 5px;\n"]);return Cn=function(){return n},n}function Nn(){var n=Object(g.a)(["\n  margin: 5px 15px;\n"]);return Nn=function(){return n},n}var An=Object(h.c)(yn)(Nn()),zn=Object(h.c)(Sn)(Cn()),Dn=Object(h.c)(M)(kn()),Wn=function(n){var e=n.cityName,t=n.temperature,r=n.weather,i=n.humidity,c=n.windSpeed,o=n.pressure,u=n.sunrise,s=n.sunset;return a.a.createElement(dn,{className:n.className},a.a.createElement(zn,{onClick:n.remove}),a.a.createElement(mn,{rows:[1,2,3,2,1]},a.a.createElement(bn,null,e),a.a.createElement(Dn,{temperature:t,weather:r,centered:!0,big:!0}),a.a.createElement(L,{humidity:i,windSpeed:c,pressure:o}),a.a.createElement(vn,{sunrise:u,sunset:s}),a.a.createElement(An,{text:"Forecast",onClick:n.toggle})))};function Tn(){var n=Object(g.a)(["\n  position: relative;\n  z-index: 5;\n  margin: 20px;\n"]);return Tn=function(){return n},n}function Bn(){var n=Object(g.a)(["\n  position: relative;\n  z-index: 3;\n  margin: 20px 20px 20px -20px;\n  border-radius: 0 5px 5px 0;\n  \n  @media (max-width: 899px) {\n    margin: -20px 20px 20px 20px;\n    border-radius: 0 0 5px 5px;\n  }\n"]);return Bn=function(){return n},n}function Zn(){var n=Object(g.a)(["\n  position: relative;\n  z-index: 1;\n  display: grid;\n  \n  ","\n"]);return Zn=function(){return n},n}var Fn=h.c.div(Zn(),function(n){return n.open&&"\n  @media (max-width: 899px) {\n    grid-template-rows: 1fr 3fr;\n    grid-row-end: span 4;\n  }\n  @media (min-width: 900px) {\n    grid-template-columns: 1fr 3fr;\n    grid-column-end: span 4;\n  }\n"}),In=Object(h.c)(on)(Bn()),Mn=Object(h.c)(Wn)(Tn()),qn=function(n){var e=n.cityName,t=n.temperature,r=n.weather,i=n.humidity,c=n.windSpeed,o=n.pressure,u=n.sunrise,s=n.sunset,d=n.forecast;return a.a.createElement(Fn,{open:n.open},a.a.createElement(Mn,{cityName:e,temperature:t,weather:r,humidity:i,windSpeed:c,pressure:o,sunrise:u,sunset:s,remove:n.remove,toggle:n.toggle}),n.open&&a.a.createElement(In,{forecast:d}))};function Hn(){var n=Object(g.a)(["\n    @media (max-width: 899px) {\n       grid-row-end: span 4;\n       grid-template-rows: 1fr 3fr;\n    }\n     @media (min-width: 900px) {\n       grid-template-columns: 1fr 3fr;\n       grid-column-end: span 4;\n     }"]);return Hn=function(){return n},n}function Ln(){var n=Object(g.a)(["\n  ","\n"]);return Ln=function(){return n},n}function Jn(){var n=Object(g.a)(["\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  z-index: 10;\n  padding: 5px 10px;\n  border-radius: 0 0 5px 5px;\n  box-shadow: 0 0 3px 3px rgba(0, 0, 0, 0.4);\n  display: flex;\n  \n  background: ",";\n"]);return Jn=function(){return n},n}function Xn(){var n=Object(g.a)(["\n  position: relative;\n  z-index: 5;\n  border-radius: 0 0 2px 2px;\n  box-shadow: inset 0 0 3px 3px rgba(0, 0, 0, 0.4);\n  display: grid;\n\n  background: ",";\n\n  @media (max-width: 599px) {\n    grid-auto-rows: 400px;\n  }\n\n  @media (min-width: 600px) and (max-width: 899px) {\n    grid-auto-rows: 720px;\n  }\n\n  @media (min-width: 900px) {\n    grid-template-columns: repeat(4, 1fr);\n    grid-auto-rows: 560px;\n  }\n"]);return Xn=function(){return n},n}function Yn(){var n=Object(g.a)(["\n  position: relative;\n  margin: 5vh 0;\n  width: 95%;\n  max-width: 1400px;\n  border-radius: 5px;\n  box-shadow: 0 0 5px 3px rgba(0, 0, 0, 0.4);\n  display: grid;\n  \n  border: 2px solid ",";\n\n  @media (max-width: 599px) {\n    grid-template-rows: 100px minmax(400px, 1fr);\n  }\n\n  @media (min-width: 600px) and (max-width: 899px) {\n    grid-template-rows: 180px minmax(720px, 1fr);\n    width: 75%;\n  }\n\n  @media (min-width: 900px) {\n    grid-template-rows: 140px minmax(560px, 1fr);\n  }\n"]);return Yn=function(){return n},n}function Pn(){var n=Object(g.a)(["\n  min-height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  \n  background: ",";\n"]);return Pn=function(){return n},n}function Qn(){var n=Object(g.a)(["\n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n"]);return Qn=function(){return n},n}function Rn(n,e,t){for(n=n.slice();n.length;)t[n.pop()]=e}var $n="db9072c49ae714096027e364cc2f3d97",_n="AtZXuLgTcqINybvNxDwkEi2zQZ-ZT07_34zj8AYJTWBydl8hmNOqSLn2b6qI7Y-a",Gn=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Kn={};Rn([6,7,8],"Morning",Kn),Rn([12,13,14],"Afternoon",Kn),Rn([21,22,23],"Evening",Kn),Rn([0,1,2],"Night",Kn);var Un={hour:"2-digit",minute:"2-digit"},Vn={month:"2-digit",day:"2-digit"},ne=Object(h.a)(Qn()),ee=h.c.div(Pn(),function(n){return n.theme.bgColor||"linear-gradient(45deg, #7349e5 0%,#ad1283 76%,#ad1283 100%)"}),te=h.c.section(Yn(),function(n){return n.theme.main||"#412198"}),re=h.c.div(Xn(),function(n){return n.theme.secondary||"#7349E5"}),ae=h.c.div(Jn(),function(n){return n.theme.main||"#412198"}),ie=Object(h.c)(qn)(Ln(),function(n){return n.open?Object(h.b)(Hn()):""}),ce=function(n){function e(){var n,t;Object(p.a)(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=Object(f.a)(this,(n=Object(x.a)(e)).call.apply(n,[this].concat(a)))).state={cards:{}},t.getTimeZoneOffset=function(){var n=Object(l.a)(d.a.mark(function n(e,t){var r,a,i;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://dev.virtualearth.net/REST/v1/TimeZone/".concat(e,",").concat(t,"?key=").concat(_n));case 2:if(200===(r=n.sent).status){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,r.json();case 7:return a=n.sent,i=a.resourceSets[0].resources[0].timeZone.convertedTime.utcOffsetWithDst,n.abrupt("return",3600*+i.slice(0,-3));case 10:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}(),t.parseWeatherForecast=function(n,e){for(var t=[6,7,8,12,13,14,21,22,23,0,1,2],r=[],a=function(a,i){var o=new Date(1e3*(n[a].dt+e)).getHours();if(6===o||7===o||8===o){if(4===++i)return c=i,"break";r[i]=[]}t.some(function(n){return n===o})&&i>=0&&r[i].push(n[a]),c=i},i=0,c=-1;i<n.length;i++){if("break"===a(i,c))break}return r=r.map(function(n){return n.map(function(n){var t=new Date(1e3*(n.dt+e));return{temperature:Math.round(n.main.temp),pressure:Math.round(.75006375541921*n.main.pressure),humidity:n.main.humidity,windSpeed:n.wind.speed,windDirection:n.wind.deg,weather:n.weather[0].main,timeOfDay:Kn[t.getHours()],date:t.toLocaleString("ru",Vn),day:Gn[t.getDay()]}})})},t.submitHandler=function(n){t.state.cards[n]||t.getCurrentWeather(n).then(function(e){e&&t.storeCity(n)})},t.incrementStage=function(n){0===t.state.cards[n].forecast.length&&t.getForecastWeather(n),t.setState(function(e){return{cards:Object(u.a)({},e.cards,Object(o.a)({},n,Object(u.a)({},e.cards[n],{stage:e.cards[n].stage+1})))}})},t.decrementStage=function(n){t.setState(function(e){return{cards:Object(u.a)({},e.cards,Object(o.a)({},n,Object(u.a)({},e.cards[n],{stage:e.cards[n].stage-1})))}})},t.removeCity=function(n){var e=Object(u.a)({},t.state.cards);delete e[n],t.setState({cards:e}),t.removeStoredCity(n)},t.storeCity=function(n){var e=localStorage.getItem("weatherAppCitiesAdded")||"";localStorage.setItem("weatherAppCitiesAdded",e+";"+n)},t.removeStoredCity=function(n){var e=localStorage.getItem("weatherAppCitiesAdded"),t=e?e.split(";").filter(function(e){return e!==n}):[];localStorage.setItem("weatherAppCitiesAdded",t.join(";"))},t.getCurrentWeather=function(){var n=Object(l.a)(d.a.mark(function n(e){var r,a,i,c,s;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&appid=").concat($n,"&units=metric"));case 2:if(200===(r=n.sent).status){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,r.json();case 7:return a=n.sent,n.next=10,t.getTimeZoneOffset(a.coord.lat,a.coord.lon);case 10:return i=n.sent,c=60*(new Date).getTimezoneOffset(),s=i+c,t.setState(function(n){return{cards:Object(u.a)({},n.cards,Object(o.a)({},a.name,{stage:1,cityName:"".concat(a.name,", ").concat(a.sys.country),temperature:Math.round(a.main.temp),pressure:Math.round(.75006375541921*a.main.pressure),humidity:a.main.humidity,windSpeed:a.wind.speed,windDirection:a.wind.deg,sunrise:new Date(1e3*(a.sys.sunrise+s)).toLocaleString("ru",Un),sunset:new Date(1e3*(a.sys.sunset+s)).toLocaleString("ru",Un),weather:a.weather[0].main,timeZoneOffset:s,forecast:[]}))}}),n.abrupt("return",!0);case 15:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),t.getForecastWeather=function(){var n=Object(l.a)(d.a.mark(function n(e){var r,a;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("http://api.openweathermap.org/data/2.5/forecast?q=".concat(e,"&appid=").concat($n,"&units=metric"));case 2:if(200===(r=n.sent).status){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,r.json();case 7:a=n.sent,t.setState(function(n){return{cards:Object(u.a)({},n.cards,Object(o.a)({},e,Object(u.a)({},n.cards[e],{forecast:t.parseWeatherForecast(a.list,n.cards[e].timeZoneOffset)})))}});case 9:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),t}return Object(b.a)(e,n),Object(m.a)(e,[{key:"componentDidMount",value:function(){var n=localStorage.getItem("weatherAppCitiesAdded");(n?n.split(";"):[]).forEach(this.getCurrentWeather)}},{key:"render",value:function(){var n=this,e=Object.keys(this.state.cards).map(function(e){var t=n.state.cards[e];return a.a.createElement(ie,Object.assign({},t,{open:2===t.stage,toggle:1===t.stage?function(){return n.incrementStage(e)}:function(){return n.decrementStage(e)},remove:function(){return n.removeCity(e)}}))});return a.a.createElement(ee,null,a.a.createElement(ne,null),a.a.createElement(te,null,a.a.createElement(N,null),a.a.createElement(re,null,a.a.createElement(ae,null,a.a.createElement(S,{onSubmit:this.submitHandler,text:"Add City"})),e)))}}]),e}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()})}},[[20,2,1]]]);
//# sourceMappingURL=main.e99a9107.chunk.js.map